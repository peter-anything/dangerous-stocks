var we=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var te=(e,a,t)=>a in e?we(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,ae=(e,a)=>{for(var t in a||(a={}))je.call(a,t)&&te(e,t,a[t]);if(ee)for(var t of ee(a))Pe.call(a,t)&&te(e,t,a[t]);return e};import{bD as Te,r as s,a0 as Ce,v as Ke,q as N,bE as Ne,aF as ne,af as z,o as ze,y as x,c as I,a as L,j as re,ae as A,bF as Ee}from"./index.21cb48c3.js";/**
 * tdesign v0.42.4
 * (c) 2022 tdesign
 * @license MIT
 */var Re=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,d;function oe(e){var a,t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;d||(d=document.createElement("textarea"),document.body.appendChild(d));var u=Te(e),i=u.paddingSize,O=u.borderSize,w=u.boxSizing,E=u.sizingStyle;d.setAttribute("style","".concat(E,";").concat(Re)),d.value=e.value||e.placeholder||"";var v=d.scrollHeight,g={},j=w==="border-box",P=w==="content-box";j?v+=O:P&&(v-=i),d.value="";var R=d.scrollHeight-i;(a=d)===null||a===void 0||(t=a.parentNode)===null||t===void 0||t.removeChild(d),d=null;var S=function(h){var y=R*h;return j&&(y=y+i+O),y};if(o!==null){var T=S(o);v=Math.max(T,v),g.minHeight="".concat(T,"px")}return m!==null&&(v=Math.min(S(m),v)),g.height="".concat(v,"px"),g}/**
 * tdesign v0.42.4
 * (c) 2022 tdesign
 * @license MIT
 */var He={allowInputOverMax:!1,autofocus:!1,autosize:!1,placeholder:void 0,readonly:!1};/**
 * tdesign v0.42.4
 * (c) 2022 tdesign
 * @license MIT
 */var Me=["disabled","maxlength","maxcharacter","className","readonly","autofocus","style","onKeydown","onKeypress","onKeyup","autosize","status","tips","allowInputOverMax"];function se(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),t.push.apply(t,o)}return t}function F(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?arguments[a]:{};a%2?se(Object(t),!0).forEach(function(o){x(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var $=s.exports.forwardRef(function(e,a){var t,o,m=e.disabled,u=e.maxlength,i=e.maxcharacter,O=e.className,w=e.readonly,E=e.autofocus,v=e.style,g=e.onKeydown,j=g===void 0?A:g,P=e.onKeypress,R=P===void 0?A:P,S=e.onKeyup,T=S===void 0?A:S,c=e.autosize,h=e.status,y=e.tips,b=e.allowInputOverMax,U=Ce(e,Me),ie=Ke(e,"value",e.onChange),B=N(ie,2),V=B[0],_=V===void 0?"":V,ce=B[1],ue=s.exports.useState(!1),Z=N(ue,2),le=Z[0],q=Z[1],de=s.exports.useState(!1),W=N(de,2),fe=W[0],ve=W[1],xe=s.exports.useState({}),X=N(xe,2),me=X[0],H=X[1],C=s.exports.useRef(!1),Y=typeof i!="undefined",p=s.exports.useRef(),G=s.exports.useRef(),M=s.exports.useMemo(function(){return Ne(_)},[_]),D=s.exports.useMemo(function(){var n=ne(String(_),b?1/0:i);return z(n)==="object"?n.length:n},[_,b,i]),he=ze(),l=he.classPrefix,pe=Object.keys(U).filter(function(n){return!/^on[A-Z]/.test(n)}),ge=pe.reduce(function(n,r){return Object.assign(n,x({},r,e[r]))},{}),ye=Object.keys(U).filter(function(n){return/^on[A-Z]/.test(n)}),be=ye.reduce(function(n,r){return Object.assign(n,x({},r,function(f){m||(r==="onFocus"&&q(!0),r==="onBlur"&&q(!1),e[r](f.currentTarget.value,{e:f}))})),n},{}),_e=I("".concat(l,"-textarea__inner"),O,(t={},x(t,"".concat(l,"-is-").concat(h),h),x(t,"".concat(l,"-is-disabled"),m),x(t,"".concat(l,"-is-focused"),le),x(t,"".concat(l,"-resize-none"),z(c)==="object"),t)),K=s.exports.useCallback(function(){c===!0?H(oe(p.current)):z(c)==="object"&&H(oe(p.current,c==null?void 0:c.minRows,c==null?void 0:c.maxRows))},[c]);s.exports.useEffect(function(){K()},[p==null?void 0:p.current]);function J(n){var r=n.target,f=r.value;if(!b&&!C.current&&(f=Ee(f,u),i&&i>=0)){var k=ne(f,i);f=z(k)==="object"&&k.characters}ce(f,{e:n})}function Oe(){C.current=!0}function Se(n){C.current&&(C.current=!1,J(n))}var Q=function(r,f){return L("span",{className:"".concat(l,"-textarea__limit"),children:[fe&&b?L("span",{className:"".concat(l,"-textarea__tips--warning"),children:[" ",r]}):"".concat(r),"/".concat(f)]})};return s.exports.useEffect(function(){c===!1&&H({height:"auto",minHeight:"auto"})},[K,c]),s.exports.useEffect(function(){K()},[K,_]),s.exports.useEffect(function(){b&&ve(!!(u&&M>u)||!!(i&&D>i))},[b,D,M,i,u]),s.exports.useImperativeHandle(a,function(){return{currentElement:G.current,textareaElement:p.current}}),L("div",{style:v,ref:G,className:I("".concat(l,"-textarea"),O),children:[re("textarea",ae({},F(F(F({},ge),be),{},{value:_,style:me,className:_e,readOnly:w,autoFocus:E,disabled:m,onChange:J,onKeyDown:function(r){return j(r.currentTarget.value,{e:r})},onKeyPress:function(r){return R(r.currentTarget.value,{e:r})},onKeyUp:function(r){return T(r.currentTarget.value,{e:r})},onCompositionStart:Oe,onCompositionEnd:Se,ref:p}))),Y&&Q(D,i),!Y&&u&&Q(M,u),y?re("div",{className:I("".concat(l,"-textarea__tips"),(o={},x(o,"".concat(l,"-textarea__tips--normal"),!h),x(o,"".concat(l,"-textarea__tips--").concat(h),h),o)),children:y}):null]})});$.displayName="Textarea";$.defaultProps=He;/**
 * tdesign v0.42.4
 * (c) 2022 tdesign
 * @license MIT
 */var Le=$;export{Le as T};
